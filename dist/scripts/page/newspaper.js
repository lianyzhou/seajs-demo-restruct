define("page/newspaper",["page/newspaper/news-category/index","io/newspaper","page/newspaper/news-content/index"],function(require,exports){var t=require("page/newspaper/news-category/index"),e=require("page/newspaper/news-content/index");exports.init=function(){t.init(),e.init()}}),define("page/newspaper/news-category/index",["io/newspaper"],function(require,exports){function t(){g.getNewsCategory().success(function(t){c=t,l()})}function e(){h=$("#pl_newspaper_news_category")}function i(){}function s(){}function n(){u=_.filter(c,function(t){return t.selected})}function o(){n();var t=_.pluck(u,"category");$.publish("newspaper.newscontent.loadnews",t)}function a(){c=[],$(d.category).each(function(t,e){var i=!1;$(e).hasClass("ui-selected")&&(i=!0);var s=$.getActionData(e);c.push({category:s.category,name:s.name,selected:i})}),g.setNewsCategory(c).success(function(){o()}).error(function(t){$.showErrorTip(t)})}function r(){p=$(d.listwrap).selectable(),p.on("selectablestop",a)}function l(){var t=new EJS({text:f}).render({list:c});h.html(t),d=$.builder(h),r(),o()}require("page/newspaper/news-category/css/news-category.css");var h,c,u,d,p,f=require("page/newspaper/news-category/tpl/categorys.tpl"),g=require("io/newspaper");exports.init=function(){e(),i(),s(),t()}}),define("page/newspaper/news-category/css/news-category.css",[],function(){seajs.importStyle(".W_main_news_category{width:30%;float:left;height:100%;background:#f2f2f2;background:url(/images/common/1740d9c0.seajs.png) no-repeat 0 0}.W_main_news_category .selectable .ui-selecting{background:#FECA40}.W_main_news_category .selectable .ui-selected{background:#F39814;color:#fff}.W_main_news_category .selectable{list-style-type:none;margin:20px auto 0;padding:0;width:80%}.W_main_news_category .selectable li{margin:3px;padding:5px}")}),define("page/newspaper/news-category/tpl/categorys.tpl",[],'<ol node-type="listwrap" class="selectable">\n  <% for(var i=0 , len = list.length; i<len; i++) {%>\n  <li class="ui-widget-content<% if(list[i].selected) {%> ui-selected <%}%>" node-type="category" action-data="category=<%=list[i].category%>&name=<%=list[i].name%>"><%=list[i].name%></li>\n  <%}%>\n</ol>'),define("io/newspaper",[],function(require,exports){function t(){return $.ajax({url:"/news/category",dataType:"json"})}function e(t){t=t||[];var e=JSON.stringify(t);return $.ajax({url:"/news/category",type:"POST",data:{categorys:e}})}function i(t){$.isArray(t)||(t=[]);var e=t.join(",");return $.ajax({url:"/news/newslist",dataType:"json",data:{categorys:e}})}function s(t){t=t||[];var e=JSON.stringify(t);return $.ajax({url:"/news/categoryorder",type:"POST",data:{order:e}})}exports.getNewsCategory=t,exports.getNewsList=i,exports.setNewsCategoryOrder=s,exports.setNewsCategory=e}),define("page/newspaper/news-content/index",["io/newspaper"],function(require,exports){function t(t){g.getNewsList(t).success(function(t){u=t,n()}).error(function(t){$.showErrorTip(t)})}function e(){c=$("#pl_newspaper_news_content")}function i(t){var e=$(t.target).closest('[node-type="portlet"]');if(e[0]){var i=$.builder(e);$(i.content).toggle()}}function s(){p=$.delegatedEvent(c),p.add("fold","click",v.toggle),p.add("expand","click",v.toggle)}function n(){var t=new EJS({text:h}).render({list:u}),e=$(t).css("opacity",0).animate({opacity:1});c.empty().append(e),f=$.builder(c),r()}function o(){f=$.builder(c);var t=[[],[],[],[]];return $(f.columns).each(function(e,i){var s=$.builder(i);s.portlet&&$(s.portlet).each(function(i,s){var n=$.getActionData(s);t[e].push(n.category)})}),t}function a(){var t=o(),e=JSON.stringify(m),i=JSON.stringify(t);e!==i&&(m=t,g.setNewsCategoryOrder(t).error(function(t){$.showErrorTip(t)}))}function r(){d=$(f.columns).sortable({connectWith:".column",handle:".portlet-header",cancel:".portlet-toggle",placeholder:"portlet-placeholder ui-corner-all"}),d.on("sortupdate",a)}function l(){$.subscribe("newspaper.newscontent.loadnews",function(e,i){t(i)})}var h=require("page/newspaper/news-content/tpl/newslist.tpl");require("page/newspaper/news-content/css/news-content.css");var c,u,d,p,f,g=require("io/newspaper"),m=[],v={toggle:function(t){i(t);var e=$(t.target),s=e.hasClass("ui-icon-plusthick")?"ui-icon-minusthick":"ui-icon-plusthick";e.removeClass("ui-icon-plusthick ui-icon-minusthick").addClass(s)}};exports.init=function(){e(),s(),l()}}),define("page/newspaper/news-content/tpl/newslist.tpl",[],'<div class="clearfix list" node-type="listwrap">\n  <% for(var i=0 , len = list.length; i<len; i++) {%>\n  	<div class="column" node-type="columns">\n		  <% for(var j=0 , jLen = list[i].length; j<jLen; j++) {%>\n			  <div class="portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" node-type="portlet" action-data="category=<%= list[i][j].category%>">\n				    <div class="portlet-header ui-widget-header ui-corner-all">\n				    	<span class=\'ui-icon ui-icon-minusthick portlet-toggle\' action-type="fold"></span>\n				    	<%= list[i][j].name%>\n				    </div>\n				    <div class="portlet-content" node-type="content">\n				    	<ul>\n					  		<% for(var k=0 , newsList = list[i][j].list , kLen = newsList.length; k<kLen; k++) {%>\n								<li><a href="<%= newsList[k].url%>" target="_blank"><%= newsList[k].title%></a></li>  			\n					  		<% } %>	\n				    	</ul>\n				    </div>\n			  </div>\n		   <% } %>\n	</div>\n  <% } %>\n</div>'),define("page/newspaper/news-content/css/news-content.css",[],function(){seajs.importStyle(".W_main_news_list{float:left;width:70%;height:100%;overflow-x:hidden;overflow-y:auto;background:#b3d4fc}.W_main_news_list .list{padding:10px 0 0 10px}.W_main_news_list .column{width:170px;float:left;padding-bottom:20px}.W_main_news_list .portlet{margin:0 10px 10px 0;padding:2px}.W_main_news_list .portlet-header{padding:3px;margin-bottom:6px;position:relative}.W_main_news_list .portlet-toggle{position:absolute;top:50%;right:0;margin-top:-8px;cursor:pointer}.W_main_news_list .portlet-content{padding:5px;height:220px}.W_main_news_list .portlet-content li{margin:10px 0}.W_main_news_list .portlet-placeholder{border:1px dotted #000;margin:0 3px 3px 0;height:250px}")});